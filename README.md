**Φιλτράρισμα δεδομένων**  
Για να εφαρμοστούν οι δύο περιορισμοί στο dataframe με τα Ratings, εφαρμόζεται ο καθένας ξεχωριστά και μετά γίνεται τομή των αποτελεσμάτων. Αν οι περιορισμοί εφαρμόζονταν με τη σειρά, υπήρχε κίνδυνος ο πρώτος να διαγράψει εγγραφές που θα επηρέαζαν τον δεύτερο. 

**Συγχρονισμός**   
Οι χρήστες και τα βιβλία που διαγράφηκαν από το Ratings dataframe πρέπει να διαγραφούν και από τα dataframes με τους χρήστες και τα βιβλία. Για να επιτευχθεί αυτό, ελέγχεται αν τα User-ID, ISBN υπάρχουν ή όχι στα αντίστοιχα του Ratings. 

Βug: *Το dataframe των βιβλίων δε συγχρονίζεται σωστά. Αντί να μείνουν τα 18318 βιβλία που βαθμολογούνται στο filteredRatings, μένουν τα 17479. Οι χρήστες συγχρονίζονται σωστά, οπότε η λογική είναι σωστή. Το πρόβλημα μάλλον βρίσκεται στο πώς διαβάζονται τα δεδομένα. Αυτό το bug δημιουργεί ορισμένες φορές πρόβλημα καθώς επιλέγονται βιβλία του filteredRatings που δεν υπάρχουν στο filteredBooks και το πρόγραμμα κρασάρει.*

Τα τρία νέα dataframes που δημιουργούνται είναι τα filteredRatings, filteredBooks, filteredUsers που γίνονται global. Ενώ συνήθως αυτή είναι κακή πρακτική, βοηθάει ώστε να μπορούν όλες οι μέθοδοί να έχουν πρόσβαση στα κύρια δεδομένα του συστήματος εύκολα.

**Εύρεση keywords**  
Αποθηκεύονται σε  νέα στήλη “KeyWords” στο dataframe filteredBooks.
Κατασκευάστηκε κλάση PreProcessor ώστε να γίνεται πιο εύκολα η επεξεργασία των τίτλων. Η μέθοδος preprocess δέχεται το κείμενο και εντολές σε μορφή λίστας για τη σειρά των  βημάτων προεπεξεργασίας που θα ακολουθήσει. Διαθέσιμα βήματα:
| Instruction  | Description |
| ------------- | ------------- |
| REMOVE_NUMB  | Αφαιρεί τους αριθμούς  |
|  REMOVE_PUN  | Αφαιρεί τα σημεία στίξης |
|  REMOVE_DOUBLE | Αφαιρεί μονές και διπλές λέξεις |
| LOWER  | Μετατρέπει σε πεζά  |
| TOKENIZE  | Χωρίζει σε tokens |
| REMOVE_STOPWORDS  | Αφαιρεί τα stopwords |
| LEMMATIZE  | Κάνει lemmatization  |
| STEM  | Κάνει stemming |  

Σημαντικό: Τα βήματα REMOVE_NUMB, REMOVE_PUN, REMOVE_DOUBLE, LOWER πρέπει να βρίσκονται πριν το TOKENIZE!!!

**Δημιουργία User Profile**  
To userProfiles είναι ένα καινούριο dataframe με τα προφίλ των χρηστών. Η συνάρτηση makeUserProfile δέχεται το userid ενός χρήστη και επιστρέφει μια λίστα, στην ουσία μια εγγραφή, που γίνεται append στο dataframe. Το προφίλ του χρήστη αποτελείται από το id του και λέξεις κλειδιά, συγγραφείς και έτη που του αρέσουν. Χρησιμοποιούνται σύνολα ως λίστες στα πεδία τιμών ώστε να μην υπάρχουν διπλότυπα στοιχεία.

**Εύρεση παρόμοιων βιβλίων** - Χρονοβόρα!  
Γίνεται iteration στο dataframe filteredBooks για να βρεθεί η ομοιότητα για κάθε βιβλίο. Αυτή  είναι κακή πρακτική, σύμφωνα με https://stackoverflow.com/a/55557758, και μάλλον φταίει που καθυστερεί τόσο το πρόγραμμα.
Χρησιμοποιείται μια συνάρτηση calcSimilarity που παίρνει ως ορίσματα το προφίλ ενός χρήστη, ένα βιβλίο και τη μέθοδο εύρεσης ομοιότητας (JACCARD ή DICE) και επιστρέφει την ομοιότητα. Αυτός ο τρόπος δεν είναι ο πιο αποδοτικός, καθώς η συνάρτηση καλείται δύο φορές, διπλασιάζοντας τον αριθμό πράξεων που πρέπει να γίνουν, αλλά φαίνεται πιο προγραμματιστικά σωστός.

**Golden Standard**  
Αρχικά φτιάχνει μία λίστα με όλες τις συστάσεις (χωρίς διπλότυπα). Για κάθε βιβλίο της νέας  λίστας κοιτάζει αν αυτό υπάρχει στη λίστα Jaccard και στη λίστα Dice, αυξάνοντας ένα μετρητή count και υπολογίζοντας τη μέση ομοιότητα ταυτόχρονα. Προσθέτει τα στοιχεία σε ένα dataframe και κάνει ταξινόμηση αρχικά κατά Count και μετά κατά Similarity. Δεν ασχολείται με τους τίτλους των βιβλίων.  

**Overlap**  
Η συνάρτηση calcOverlap παίρνει δύο λίστες με ISBN και επιστρέφει τη μέση επικάλυψή τους.

**Έξοδος**  
Οι προτάσεις με Jaccard, Dice, Golden Standard και τα προφίλ των χρηστών αποθηκεύονται σε εξωτερικά αρχεία csv που βρίσκονται στο φάκελο “results” μέσα στο πρόγραμμα.
